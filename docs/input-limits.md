# 字符长度限制说明

本项目对所有用户输入都实施了字符长度限制，以确保数据库性能和用户体验。

## 限制规则

### 项目相关
- **项目名称**: 最多 50 个字符
- **项目描述**: 最多 200 个字符
- **位置文本**: 最多 100 个字符

### 标签和分类
- **单个标签**: 最多 20 个字符
- **标签数量**: 最多 10 个
- **分类名称**: 最多 30 个字符

### 抽奖池相关
- **单个抽奖项**: 最多 100 个字符/行
- **轮换位标签**: 最多 30 个字符

### 分组相关
- **成员名称**: 最多 50 个字符/行
- **组名**: 最多 30 个字符

### 用户相关
- **用户名**: 最多 50 个字符
- **邮箱**: 最多 100 个字符

### 其他
- **图片 URL**: 最多 500 个字符

## 实现位置

### 前端限制
- **UI 层面**: `app/app/[id]/settings/page.tsx`
  - 所有 Input 组件添加了 `maxLength` 属性
  - Textarea 内容通过 `limitTextareaLines()` 函数限制每行长度
  - 实时显示字符计数（如：`25/50`）

### 后端验证
- **API 层面**: `app/api/projects/route.ts` 和 `app/api/projects/[id]/route.ts`
  - POST 和 PUT 请求都会验证输入长度
  - 超出限制返回 400 错误和具体提示
  - 自动截断过长的内容

### 常量定义
- **配置文件**: `lib/constants.ts`
  - 集中定义所有限制常量
  - 便于统一管理和修改

## 用户体验

1. **实时反馈**: 输入框旁显示当前字符数/最大字符数
2. **自动截断**: 输入超过限制时自动截断，不会报错
3. **提示信息**: 在输入框附近提示最大长度
4. **防止提交**: 超长内容无法输入到字段中

## 数据库安全

即使前端验证被绕过，后端 API 也会：
1. 验证所有输入长度
2. 返回明确的错误信息
3. 自动截断过长内容
4. 防止数据库错误和性能问题
